<mat-horizontal-stepper [linear]="isLinear" class="w-1/2 flex mx-auto h-full">
  <mat-step>
    <ng-template matStepLabel>Pradžia</ng-template>
    <mat-card>
      <mat-card-content>
        <div>
          <div class="flex flex-col items-start">
            <p>
              <strong>
                Prieš pradėdami pildyti, įsitikinkite kad pasirūpinote visomis
                saugumo priemonėmis
              </strong>
            </p>

            <p>Būtinos saugumo priemonės:</p>
            <div class="pt-2">
              <p>Įjunkite avarinius žibintus</p>
              <p>Pastatykite avarinį ženklą pagal KET</p>
              <p>Apsivilkite liemenę su atšvaitais</p>
              <p>Jei yra sužalotų asmenų - skambinkite <strong>112</strong></p>
            </div>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" matStepperNext>
          Supratau
        </button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="acceptTerms">
    <ng-template matStepLabel>Sąlygos</ng-template>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="acceptTerms">
          <div class="flex flex-col">
            <p>Nėra sužalotų asmenų</p>
            <p>Susidūrė tik 2 transporto priemonės</p>
            <p>Nėra padaryta žala kitam trečiųjų asmenų turtui</p>
            <p>Abi transporto priemonės yra registruotos Lietuvoje</p>
            <p>Eismo įvykis įvyko Lietuvoje</p>
            <p>
              Eismo įvykio dalyviai sutaria dėl to, kuris vairuotojas yra
              kaltininkas
            </p>
          </div>
          <mat-radio-group formControlName="options">
            <mat-radio-button value="option1" class="pt-4"
              >Patvirtinu, jog visos sąlygos galioja</mat-radio-button
            >
          </mat-radio-group>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="accent" matStepperPrevious>
          Atgal
        </button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="firstFormGroup">
    <ng-template matStepLabel>Vairuotojų duomenys</ng-template>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="firstFormGroup">
          <div class="flex flex-row">
            <div class="flex flex-col">
              <div>
                <p>Jūsų valstybiniai numeriai</p>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="XXX000"
                    formControlName="myLicensePlate"
                  />
                  <mat-error
                    *ngIf="
                      firstFormGroup.controls['myLicensePlate'].hasError(
                        'required'
                      )
                    "
                  >
                    Valstybinis numeris yra privalomas
                  </mat-error>
                  <mat-error
                    *ngIf="
                      firstFormGroup.controls['myLicensePlate'].hasError(
                        'pattern'
                      )
                    "
                  >
                    Valstybinis numeris turi būti formatu XXX000
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="pt-4">
                <p>Jūsų el. paštas</p>
                <mat-form-field>
                  <input
                    matInput
                    formControlName="myEmail"
                    placeholder="El. Paštas"
                  />
                </mat-form-field>
              </div>
            </div>

            <div class="flex flex-col pl-6">
              <div>
                <p>Kito vairuotojo valstybiniai numeriai</p>
                <mat-form-field>
                  <input
                    matInput
                    placeholder="XXX000"
                    formControlName="otherLicensePlate"
                  />
                  <mat-error
                    *ngIf="
                      firstFormGroup.controls['otherLicensePlate'].hasError(
                        'required'
                      )
                    "
                  >
                    Valstybinis numeris yra privalomas
                  </mat-error>
                  <mat-error
                    *ngIf="
                      firstFormGroup.controls['otherLicensePlate'].hasError(
                        'pattern'
                      )
                    "
                  >
                    Valstybinis numeris turi būti formatu XXX000
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="pt-4">
                <p>Kito vairuotojo El. Paštas</p>
                <mat-form-field>
                  <input
                    matInput
                    formControlName="otherEmail"
                    placeholder="El. Paštas"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step label="Draw">
    <mat-card-content>
      <div id="draw-area">
        <canvas
          #canvasElement
          width="500"
          height="300"
          style="border: 1px solid black"
        ></canvas>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button matStepperPrevious>Atgal</button>
      <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
    </mat-card-actions>
  </mat-step>

  <mat-step [stepControl]="timeAndPlace">
    <ng-template matStepLabel>Eismo įvykio laikas ir vieta</ng-template>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="timeAndPlace">
          <div>
            <mat-form-field>
              <input
                matInput
                type="time"
                formControlName="time"
                placeholder="Laikas"
              />
            </mat-form-field>
            <mat-form-field>
              <input matInput formControlName="lat" placeholder="Platuma" />
            </mat-form-field>
            <mat-form-field>
              <input matInput formControlName="lng" placeholder="Ilguma" />
            </mat-form-field>
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="pictureGroup">
    <ng-template matStepLabel>Nuotraukos</ng-template>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="pictureGroup">
          <h1>Įvykio vieta</h1>
          <input type="file" formControlName="picture1" accept="image/*" />
          <h1>Valstybiniai numeriai</h1>
          <input type="file" formControlName="picture2" accept="image/*" />
          <h1>Transporto priemonės sugadinimai</h1>
          <input type="file" formControlName="picture3" accept="image/*" />

          <h1>Įvykio vieta</h1>
          <input type="file" formControlName="picture4" accept="image/*" />
          <h1>Valstybiniai numeriai</h1>
          <input type="file" formControlName="picture5" accept="image/*" />
          <h1>Transporto priemonės sugadinimai</h1>
          <input type="file" formControlName="picture6" accept="image/*" />
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="hitGroup">
    <ng-template matStepLabel>Sugadinimai</ng-template>
    <mat-card>
      <!-- make for 2 cars -->
      <mat-card-content>
        <form [formGroup]="hitGroup">
          <mat-form-field>
            <mat-label>Pasirinkti pirminį smūgį</mat-label>
            <mat-select formControlName="myFirstHit">
              <mat-option *ngFor="let hit of hits" [value]="hit">
                {{ hit }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Pasirinkti pirminį smūgį</mat-label>
            <mat-select formControlName="otherFirstHit">
              <mat-option *ngFor="let hit of hits" [value]="hit">
                {{ hit }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="hitGroup">
    <ng-template matStepLabel>Aplinkybės</ng-template>
    <mat-card>
      <mat-card-content class="flex flex-col justify-center items-center">
        <form [formGroup]="howGroup" class="w-full max-w-md">
          <div *ngFor="let how of hows" class="flex flex-col items-start mb-2">
            <div class="flex flex-row items-center mx-auto">
              <mat-checkbox
                [value]="how.value"
                [checked]="how.checked"
                (change)="onMyHowChange($event, how.label)"
                class="mr-2"
              ></mat-checkbox>
              <p class="flex-1 mr-2 break-words text-center">{{ how.label }}</p>
              <mat-checkbox
                [value]="how.value"
                [checked]="how.checked"
                (change)="onOtherHowChange($event, how.label)"
              ></mat-checkbox>
            </div>
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" matStepperNext>Pirmyn</button>
      </mat-card-actions>
    </mat-card>
  </mat-step>

  <mat-step [stepControl]="driverData">
    <ng-template matStepLabel>Duomenys</ng-template>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="driverData">
          <div class="flex flex-row">
            <div formGroupName="firstDriver" class="flex flex-col mr-4">
              <mat-form-field>
                <input matInput formControlName="name" placeholder="Vardas" />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="surname"
                  placeholder="Pavardė"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  [matDatepicker]="picker"
                  formControlName="birthDate"
                  placeholder="Gimimo data"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="country"
                  placeholder="Valstybė"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="street"
                  placeholder="Adresas"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="phoneNumber"
                  placeholder="Tel. nr."
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="idNumber"
                  placeholder="Vairuotojo pažymėjimo nr."
                />
              </mat-form-field>
            </div>
            <div formGroupName="secondDriver" class="flex flex-col">
              <mat-form-field>
                <input matInput formControlName="name" placeholder="Vardas" />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="surname"
                  placeholder="Pavardė"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  [matDatepicker]="picker2"
                  formControlName="birthDate"
                  placeholder="Gimimo data"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker2"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="country"
                  placeholder="Valstybė"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="street"
                  placeholder="Adresas"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="phoneNumber"
                  placeholder="Tel. nr."
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="idNumber"
                  placeholder="Vairuotojo pažymėjimo nr."
                />
              </mat-form-field>
            </div>
          </div>
        </form>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button matStepperPrevious>Atgal</button>
        <button mat-raised-button color="primary" (click)="sendData()">
          Patvirtinti
        </button>
      </mat-card-actions>
    </mat-card>
  </mat-step>
</mat-horizontal-stepper>
